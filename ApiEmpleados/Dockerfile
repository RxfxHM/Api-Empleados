#Imagen Modelo Creamos una Imagen a partir de una que ya esta hecha
FROM eclipse-temurin:17.0.14_7-jdk

#INFORMAR EL PUERTO DONDE SE EJECUTA EL CONTENEDOR
EXPOSE 8001

#DEFINIR DIRECTORIO RAIZ DE NUESTRO CONTENEDOR
WORKDIR /root

#COPIAR Y PEGAR ARCHIVOS DENTRO DEL CONTENEDOR
COPY ./pom.xml /root
COPY ./.mvn /root/.mvn
COPY ./mvnw /root

#DESCARGAR LAS SOLAMENTE LAS DEPENDENCIAS
RUN ./mvnw dependency:go-offline 

#COPIAR EL CODIGO FUENTE DEL CONTENEDOR YA CON LAS DEPENDENCIAS DESCARGADAS Y LISTAS
COPY ./src /root/src

#CONSTRUIR NUESTRA APLICACION
#NECESITAMOS HABILITAR LOS TEST UNITARIOS, PERO CON EL COMANDO -D SALTAMOS LOS TEST
RUN ./mvnw clean install -DskipTests

#LEVANTAR NUESTRA APLICACION CUANDO EL CONTENEDOR INICIE
ENTRYPOINT [ "java", "-jar", "/root/target/SpringDocker-0.0.1-SNAPSHOT.jar" ]










